function varargout=ImageRegistration(varargin)
gui_Singleton=1;
gui_State=struct('gui_Name', mfilename,...
                  'gui_Singleton', gui_Singleton,...
                 'gui_OpeningFcn', @Image
                  Registration_OpeningFcn,...
                 'gui_OutputFcn', @Image
                  Registration_OutputFcn,...
                 'gui_LayoutFcn', [],...
                 'gui_Callback', []);
if nargin && ischar(varargin{1})
   gui_State.gui_Callback=str2func(varargin{1});
end

if nargout
   [varargout{1:nargout}]=gui_mainfcn(gui_State,varargin{:});
else
   gui_mainfcn(gui_State, varargin{:});
end
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

addpath(pwd);

function ImageRegistration_OpeningFcn(hObject, eventdata, handles, varargin)
handles.output=hObject;
guidata(hObject,handles);

function varargout=ImageRegistration_OutputFcn(hObject, eventdata, handles)

varargout{1}=handles.output;

function pushbutton1_Callback(hObject, eventdata, handles)
clc
%%%%%%%%%%%%调用 OpenImage.m 读入参考图像并获取文件名, 图像大小%%%

Image_I.FileInformation.IsImage=0;
Image_I=OpenImage;
end
delete(Image_I.figure1);
handles.Imsize1=Image_I.FileInformation.imsize,
handles.filenameI=Image_I.FileInformation.filename;
handles.names_dispI=Image_I.FileInformation.names_disp;
set(handles.text2,'String',handles.names_dispI);
guidata(hObject,handles);

%%%%%%%%%%%%%%%显示参考图像
axes(handles.axes1)
I=imread(handles.filenameI);
imshow(I)

function pushbutton2_Callback(hObject,eventdata,handles)
clc
%%%%%%%%%55调用OpenImage.m 读入浮动图像并获取文件名,图像大小
Image_J.FileInformation.IsImage=0;
while Image_J.FileInformation.IsImage==0
Image_J=OpenImage;
end
delete(Image_J.figure1);
handles.ImsizeJ=Image_J.FileInformation.imsize;
handles.filenameJ=Image_J.FileInformation.filename;
handles.names_dispJ=Image_J.FileInformation.names_disp;
set(handles.text3,'String',handles.name_dispJ);
guidata(hObject,handles);

%%%%%%%%%%%%%%显示浮动图像%%%%%%%%%%
axes(handles.axes2)
J=imread(handles.filenameJ);
imshow(J)

function pushbutton3_Callback(hObject, eventdata,handles)
clc;
%%%%%%检测是否已输入参考图像与浮动图像%%%
axesIbox=get(handles.axes1,'box');
axesJbox=get(handles.axes2,'box');
if strcmp(axesIbox,'off')|strcmp(axesJbox,'off')
  errordlg('Pklease select Image for Registration','Error')
error('NO Image!')
end

%%%%%%%%%%%%%%%检测参考图像与浮动图像大小是否相同%%
handle